<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core">

<h:body>

    <ui:composition template="template/template.xhtml">

        <ui:define name="content">

            <div class="col-md-10 col-md-offset-1">
                <h2>Instruction ##{instructionService.instruction.id}</h2>

                <div class="col-md-4">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Instruction details</h3>
                        </div>
                        <div class="panel-body">
                            <h4>Status: #{instructionService.instruction.status}</h4>

                            <p>
                                <h:outputLabel>Assign Date: </h:outputLabel>#{instructionService.instruction.assignDate}
                                <br/>
                                <h:outputLabel>Mileage: </h:outputLabel>#{instructionService.instruction.mileage}
                                <br/>
                                <h:outputLabel>APK: </h:outputLabel>#{instructionService.instruction.apk}<br/>
                                <h:outputLabel>Sample: </h:outputLabel>#{instructionService.instruction.sample}<br/>
                                <h:outputLabel>Instruction description: </h:outputLabel>#{instructionService.instruction.description}
                            </p>
                        </div>
                    </div>

                </div>
                <div class="col-md-4">

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Vehicle details</h3>
                        </div>
                        <div class="panel-body">
                            <p>
                                <h:outputLabel>License: </h:outputLabel>#{instructionService.instruction.car.license}
                                <br/>
                                <h:outputLabel>Brand: </h:outputLabel>#{instructionService.instruction.car.brand}
                                <br/>
                                <h:outputLabel>Type: </h:outputLabel>#{instructionService.instruction.car.type}
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Customer details</h3>
                        </div>
                        <div class="panel-body">
                            <p>

                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Activities</h3>
                        </div>
                        <div class="panel-body">

                            <h:form>
                                <h:dataTable id="activities" value="#{instructionService.instruction.activities}"
                                             var="activity"
                                             styleClass="table tabel-striped">
                                    <h:column>
                                        <f:facet name="header">
                                            Assign Date
                                        </f:facet>
                                        #{activity.assignDate}
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            Sign Off Date
                                        </f:facet>
                                        #{activity.signOffDate}
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            Hours Spent
                                        </f:facet>
                                        <h:outputText value="#{activity.hoursSpent}" rendered="#{not activity.edited}"/>
                                        <h:inputText value="#{activity.hoursSpent}" rendered="#{activity.edited}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            Activity
                                        </f:facet>
                                        <h:outputText value="#{activity.activities}" rendered="#{not activity.edited}"/>
                                        <h:inputTextarea value="#{activity.activities}" rendered="#{activity.edited}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            Actions
                                        </f:facet>

                                        <div class="btn btn-group">
                                            <h:commandButton value="Edit"
                                                             action="#{instructionService.editActivity(activity)}"
                                                             rendered="#{not activity.edited}"
                                                             styleClass="btn btn-primary"/>
                                            <h:commandButton value="Save"
                                                             action="#{instructionService.saveActivity(activity)}"
                                                             rendered="#{activity.edited}"
                                                             styleClass="btn btn-primary"/>
                                            <h:commandButton value="Remove"
                                                             action="#{instructionService.removeActivity(activity)}"
                                                             styleClass="btn btn-primary"/>
                                            <h:commandButton value="Sign off"
                                                             action="#{instructionService.signOffActivity(activity)}"
                                                             styleClass="btn btn-primary"/>
                                        </div>
                                    </h:column>
                                </h:dataTable>
                                <h:commandButton value="Add New Activity"
                                                 action="#{instructionService.addNewActivity()}"
                                                 class="btn btn-primary"/>
                            </h:form>
                        </div>
                    </div>
                </div>

                <div class="col-md-12">
                    <h:form>
                        <div class="btn btn-group">
                            <h:commandButton value="Start"
                                             action="#{instructionService.startInstruction(instructionService.instruction)}"
                                             styleClass="btn btn-primary"/>
                            <h:commandButton value="End"
                                             action="#{instructionService.endInstruction(instructionService.instruction)}"
                                             styleClass="btn btn-primary"/>
                        </div>
                    </h:form>
                </div>
            </div>

        </ui:define>
    </ui:composition>


</h:body>
</html>
